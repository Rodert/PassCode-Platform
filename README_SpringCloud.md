初学springcloud，众多的组件让人学学停停。其实仔细的看下来，SpringCloud的关键组件就那么几个。
既然是组件，那就能够随意替换。

简单谈一下SpringCloud的关键部位。

[toc]

## 1. 远程调用RPC
## 2. 注册中心
## 3. 熔断、限流
## 4. 网关
## 5. 其他



## 1. 远程调用RPC

SpringCloud默认的是Feign和Ribbon，主要是提供了远程调用请求和解析，以及负载均衡的功能。客观点来说，如果不用这两个组件，就会越来越四不像，干脆也别叫SpringCloud了，所以替换不得。

RPC会大量使用动态代理的功能，将你的字符串或者配置（因为网络传输方便）搞成动态的接口。

你也可以写一个RPC进行集成，有很多教程教你手撸一个。

ALIBABA 版的集成了个dubbo，dubbo就是个RPC。所以你一用这玩意，其他的一些关键组件也得跟着全套的换，组件就不叫组件了!


## 2. 注册中心

服务注册中心是微服务的另外一个必备组件，用来协调服务提供者和调用者的相互发现，SpringCloud默认的注册中心是Eureka。

ALIBABA版的用的是Nacos。Nacos的更新目前来看还是比较活跃的，但真没有必要集成在一个Cloud中。Nacos最好的方式还是独立发布，然后维护一个starter。开发者可以按照自己公司的环境进行有选择性的集成或替换。集成一个组件的成本是比较低的，远远低于删掉一堆自以为是的功能。

SpringCloud还可以选择Zookeeper，或者Consul，甚至Etcd等，，进行注册中心的搭建。目前，Eureka宣布不再维护后，Consul应该是首要选择。

Consul自带Dashboard和ACL，能够看到大多数你所关心的信息。为了能够集成在我们公司的体系中，你可能会开发一些后台管理功能，进行更多的控制。这部分开发简单，只需要做个界面，直接通过API读取Consul的数据就可以了。



## 3. 熔断、限流

这部分已经被炒作成微服务体系的必备组件，但扪心自问，这个功能对于中小型的应用可能就是一个摆设。但我们还是要搞的，因为这是个卖点。

SpringCloud默认的组件是Hystrix，提供了多线程和信号量来控制的不同方式。可惜的是Hystrix也宣布不再维护了，官方推荐的替换版本是resilience4j。

熔断限流功能其实是非常简单的，同事花了一周时间就撸了个足够用的组件。这部分的主要设计在于能够简单的应用，最好是能够通过后台配置实时生效。

爸爸版的是Sentinel，虽然也带了个后台，但是并没有和注册中心进行集成，搞了个不伦不类。

我要用Sentinel，我自己集成就好了，用你个大头鬼。



## 4. 网关

网关，可以做统一的降级、限流、认证授权、安全等，是微服务的又一个组件。SpringCloud默认的是Zuul，Zuul又有版本1和2之分。SpringCloud还可以选择Gateway进行网关控制。

你的公司用网关了么？我保持疑问。见过很多到了C、D轮的公司，依然是简单的Nginx简单路由。

还有一种与语言无关的网关就是基于Nginx的Openresty，包括集成度更高的Kong。但这个商业化趋势很明显，故意将简单的事情复杂化，稳定性待考究，很有手段。

我的意思是说，网关不是必须的，也没有好用的网关。这是个五十步笑百步的领域。


## 5. 其他

微服务中其他重要的组件，包括日志收集、调用链、持续集成等，这些SpringCloud们都没有提供。


JavaPub参考巨人：
https://www.imooc.com/article/290071
https://developer.aliyun.com/article/718349
